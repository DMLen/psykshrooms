<?xml version="1.0" encoding="utf-8" ?>
<Defs>
  
<ThingDef ParentName="DrugBase">
<defName>psykwine</defName>
<label>Psykwine</label>
<description>A strong, potent wine containing psychite and alcohol, fermented from the subterranean psykshroom fungus. Opening the large earthern pot, it smells musty, earthy, and stale. But once you get past the smell, the flavour is surprisingly sweet with herbal tones. How psykwine came to first be produced is unknown, but it's believed to have originally just been a way to smuggle psychite out of the subterranean fungusariums where the psykshrooms were first grown. Only some time later did people realize it tasted good too, and the rest is history.

While the psychedelic effects of raw psykcaps are lost during the fermenting process, this wine is still capable of delivering a potent hit of psychite and alcohol to the imbiber. This contains as much alcohol as vodka, and nearly as much psychite as a hit of yayo. It's very easy to accidentally overdose, so be careful!</description>
<graphicData>
    <texPath>Psykmod/Psykwine</texPath>
    <graphicClass>Graphic_StackCount</graphicClass>
</graphicData>
<rotatable>false</rotatable>
<stackLimit>10</stackLimit>
<statBases>
    <DeteriorationRate>0.5</DeteriorationRate>
    <MarketValue>17</MarketValue>
    <Mass>0.5</Mass>
    <Flammability>0.5</Flammability>
    <Nutrition>0.08</Nutrition>
</statBases>
<ingestible>
    <foodType>Fluid, Processed, Liquor</foodType>
    <joyKind>Chemical</joyKind>
    <joy>0.17</joy>
    <nurseable>true</nurseable>
    <drugCategory>Social</drugCategory>
    <ingestSound>Ingest_Beer</ingestSound>
    <ingestHoldOffsetStanding>
    <northDefault>
        <offset>(0.18,0,0)</offset>
    </northDefault>
    </ingestHoldOffsetStanding>
    <ingestCommandString>Drink {0}</ingestCommandString>
    <ingestReportString>Drinking {0}.</ingestReportString>
    <chairSearchRadius>25</chairSearchRadius>
    <outcomeDoers>
        <!--todo: replace this with a custom high afterwards-->
    <li Class="IngestionOutcomeDoer_GiveHediff">
        <hediffDef>PsykwineHigh</hediffDef>
        <severity>0.33</severity>
        <toleranceChemical>Psychite</toleranceChemical>
    </li>

    <li Class="IngestionOutcomeDoer_GiveHediff">
        <hediffDef>PsychiteTolerance</hediffDef>
        <severity>0.030</severity>
                <divideByBodySize>true</divideByBodySize>
    </li>

    <li Class="IngestionOutcomeDoer_GiveHediff">
		<hediffDef>AlcoholTolerance</hediffDef>
		<severity>0.02</severity>
			    <divideByBodySize>true</divideByBodySize>
	</li>

    <li Class="IngestionOutcomeDoer_OffsetNeed">
        <need>Rest</need>
        <offset>0.4</offset>
        <toleranceChemical>Psychite</toleranceChemical>
    </li>


    </outcomeDoers>
</ingestible>
<techLevel>Neolithic</techLevel>

<comps>

    <li Class="CompProperties_Drug">
    <chemical>Psychite</chemical>
    <addictiveness>0.10</addictiveness>
    <minToleranceToAddict>0.04</minToleranceToAddict>
    <existingAddictionSeverityOffset>0.20</existingAddictionSeverityOffset>
    <needLevelOffset>1</needLevelOffset>
    <isCombatEnhancingDrug>true</isCombatEnhancingDrug>
    <listOrder>100</listOrder>
    <overdoseSeverityOffset>
        <min>0.15</min>
        <max>0.32</max>
    </overdoseSeverityOffset>
            <largeOverdoseChance>0.01</largeOverdoseChance>
        </li>

</comps>

</ThingDef>


<!--psykwine high-->

<HediffDef>
    <defName>PsykwineHigh</defName>
    <label>psykwine drunk</label>
    <labelNoun>drunk on psykwine</labelNoun>
    <description>Psychite and alcohol in the bloodstream from psykwine. Produces very similar effects to yayo, scaling with drunkenness.</description>
    <hediffClass>Hediff_Alcohol</hediffClass>
    <defaultLabelColor>(1,0,0.5)</defaultLabelColor>
    <scenarioCanAdd>true</scenarioCanAdd>
    <isBad>false</isBad>
    <comps>
        
        <li Class="HediffCompProperties_SeverityPerDay">
            <severityPerDay>-0.75</severityPerDay>
            <showHoursToRecover>true</showHoursToRecover>
        </li>
    </comps>
    <stages>
        <li>
            <label>warm</label>

            <painFactor>0.5</painFactor>
            <restFallFactor>0.33</restFallFactor>
            <capMods>
            <li>
              <capacity>Moving</capacity>
              <offset>0.15</offset>
            </li>
          </capMods>	

        </li>
        <li>
            <minSeverity>0.25</minSeverity>
            <label>tipsy</label>

            <painFactor>0.5</painFactor>
            <restFallFactor>0.33</restFallFactor>
            <capMods>
            <li>
              <capacity>Moving</capacity>
              <offset>0.15</offset>
            </li>
          </capMods>	
        </li>

        <li>
            <minSeverity>0.4</minSeverity>
            <label>drunk</label>
            
            <painFactor>0.5</painFactor>
            <restFallFactor>0.33</restFallFactor>
            <capMods>
            <li>
              <capacity>Moving</capacity>
              <offset>0.15</offset>
            </li>
          </capMods>
        </li>

        <li>
            <minSeverity>0.7</minSeverity>
            <label>hammered</label>

            <painFactor>0.5</painFactor>
            <restFallFactor>0.33</restFallFactor>
            <capMods>
            <li>
              <capacity>Moving</capacity>
              <offset>0.15</offset>
            </li>
          </capMods>	

        </li>
        <li>
            <minSeverity>0.9</minSeverity>
            <label>blackout</label>
            <capMods>
            <li>
              <capacity>Consciousness</capacity>
              <setMax>0.1</setMax>
            </li>
          </capMods>
          <hediffGivers>
						<li Class="HediffGiver_Random">
							<hediff>ChemicalDamageModerate</hediff>
							<mtbDays>10</mtbDays>
							<partsToAffect>
								<li>Brain</li>
							</partsToAffect>
						</li>
					</hediffGivers>
            
        </li>
    </stages>
</HediffDef>

<!--related thoughts-->

<ThoughtDef>
    <defName>Inebriated</defName>
    <workerClass>ThoughtWorker_Hediff</workerClass>
    <hediff>PsykwineHigh</hediff>
    <validWhileDespawned>true</validWhileDespawned>
    <stages>
      <li>
        <label>psykwine warmth</label>
        <description>I just feel a bit more relaxed after that drink. That's good.</description>
        <baseMoodEffect>10</baseMoodEffect>
      </li>
      <li>
        <label>quite inebriated</label>
        <description>I'm a bit wobbly! And this is quite enjoyable.</description>
        <baseMoodEffect>14</baseMoodEffect>
      </li>     
      <li>
        <label>psykwine drunk</label>
        <description>I feel so uninhibited and unafraid! This is a great time!</description>
        <baseMoodEffect>20</baseMoodEffect>
      </li>
      <li>
        <label>psykwine hammered</label>
        <description>Wooo! What's going on?</description>
        <baseMoodEffect>26</baseMoodEffect>
      </li>   
    </stages>
  </ThoughtDef>

  <ThoughtDef>
    <defName>Hungover</defName>
    <workerClass>ThoughtWorker_Hediff</workerClass>
    <hediff>Hangover</hediff>
    <validWhileDespawned>true</validWhileDespawned>
    <stages>
      <li>
        <label>mild hangover</label>
        <description>The headache is almost gone.</description>
        <baseMoodEffect>-3</baseMoodEffect>
      </li>
      <li>
        <label>serious hangover</label>
        <description>My head hurts from all that liquor.</description>
        <baseMoodEffect>-6</baseMoodEffect>
      </li>
      <li>
        <label>pounding hangover</label>
        <description>It feels like a gaggle of geese are pecking at my skull.</description>
        <baseMoodEffect>-12</baseMoodEffect>
      </li>
      <li>
        <label>hung over (hidden)</label>
        <visible>false</visible>
      </li>
    </stages>
  </ThoughtDef>

</Defs>